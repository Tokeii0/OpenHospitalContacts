# OpenHospitalContacts
## 项目简介

这是一个开源的可以为某些事业单位进行深度定制的的通讯录Android应用，旨在方便事业单位员工查询和联系同事。

## 主要功能

1. **通讯录查询**：可以查看事业单位所有员工的联系信息
2. **搜索功能**：支持按姓名或科室搜索员工
3. **科室分类**：支持按科室分类查看员工
4. **职位分类**：支持按职位分类查看员工
5. **一键拨号**：点击员工信息可直接跳转到手机拨号界面
6. **主题设置**：支持浅色/深色主题切换
7. **字体大小**：支持调整应用内字体大小
8. **联系人导入**：支持从手机通讯录导入联系人到应用
9. **联系人导出**：支持将应用中的联系人导出到手机通讯录

## 技术特点

- 使用Kotlin语言开发
- 采用MVVM架构模式
- 从本地JSON文件读取员工数据
- 使用RecyclerView高效显示员工列表
- 支持实时搜索过滤
- 侧边导航栏支持多种分类方式
- 支持深色/浅色主题切换
- 支持自定义字体大小
- 支持与系统通讯录双向同步数据

## 数据结构

员工信息包含以下字段：
- 姓名（name）
- 科室（department）
- 职务（position）
- 办公电话（officePhone）
- 手机号码（mobilePhone）

## 数据转换

项目支持从Excel文件转换数据到JSON格式：
- 使用Python脚本`convert_excel_to_json.py`将Excel文件转换为JSON
- 自动处理电话号码格式
- 为缺失的职位信息设置默认值"职工"
- 生成的JSON文件直接保存到应用的assets目录

## 使用方法

1. 启动应用后，主页面会显示所有员工的列表
2. 使用顶部的搜索框可以按姓名或科室搜索员工
3. 通过侧边导航栏可以切换到"科室分类"或"职位分类"视图
4. 点击任意员工卡片，应用会自动跳转到手机的拨号界面，并填入该员工的电话号码
5. 在设置页面可以切换应用主题和调整字体大小
6. 点击主菜单中的"导入联系人"选项可以从手机通讯录导入联系人
7. 在主页点击右上角的导出按钮或浮动按钮可以选择联系人导出到系统通讯录

## 联系人导入导出功能

### 导入联系人
- 点击主菜单中的"导入联系人"选项
- 应用会自动读取手机通讯录中的联系人
- 导入过程会自动过滤已存在的联系人，避免重复
- 导入完成后会显示成功导入的联系人数量

### 导出联系人
- 在主页点击右上角的导出按钮或浮动按钮进入选择模式
- 点击联系人选择要导出的项目，或使用"全选"菜单项
- 点击导出按钮，确认后将选中的联系人导出到系统通讯录
- 导出完成后会显示成功和失败的数量
- 如果联系人已存在于系统通讯录中，将不会重复导出

## 项目结构

```
app/
├── src/main/
│   ├── assets/
│   │   └── employees.json      # 员工数据文件
│   ├── java/dog/ctf/contacts/
│   │   ├── adapter/            # 适配器
│   │   │   ├── EmployeeAdapter.kt     # 员工列表适配器
│   │   │   ├── DepartmentAdapter.kt   # 科室列表适配器
│   │   │   └── PositionAdapter.kt     # 职位列表适配器
│   │   ├── data/               # 数据处理
│   │   │   └── EmployeeDataManager.kt # 员工数据管理器
│   │   ├── model/              # 数据模型
│   │   │   ├── Employee.kt     # 员工模型
│   │   │   ├── Department.kt   # 科室模型
│   │   │   └── Position.kt     # 职位模型
│   │   ├── style/              # 样式定义
│   │   │   └── ThemeStyle.kt   # 主题样式管理
│   │   ├── ui/                 # 界面
│   │   │   ├── home/           # 主页（通讯录）
│   │   │   ├── departments/    # 科室分类
│   │   │   ├── positions/      # 职位分类
│   │   │   ├── settings/       # 设置页面
│   │   │   └── about/          # 关于页面
│   │   ├── utils/              # 工具类
│   │   │   ├── ThemeManager.kt # 主题管理工具
│   │   │   ├── ContactsImporter.kt # 联系人导入工具
│   │   │   └── ContactsExporter.kt # 联系人导出工具
│   │   ├── MainActivity.kt     # 主活动
│   │   └── ContactsApplication.kt # 应用程序类
│   └── res/                    # 资源文件
└── build.gradle.kts            # 构建配置
```

## 导航功能

应用提供了五个主要导航选项：

1. **通讯录**：显示所有员工列表，支持搜索功能
2. **科室分类**：按科室分类显示员工，点击科室可查看该科室的所有员工
3. **职位分类**：按职位分类显示员工，点击职位可查看该职位的所有员工
4. **设置**：提供主题切换和字体大小调整功能
5. **关于**：显示应用信息和版本号

## 设置功能

应用提供以下设置选项：

1. **主题设置**：
   - 浅色主题：默认的亮色界面
   - 深色主题：护眼的暗色界面
   - 跟随系统：根据系统设置自动切换主题

2. **字体大小**：
   - 小号字体：适合信息密度较大的显示
   - 中号字体：默认大小，平衡可读性和信息量
   - 大号字体：提高可读性
   - 特大字体：最大字体，适合视力不佳的用户

## 开发环境

- Android Studio
- Kotlin 1.8+
- Android SDK 33+

## 未来计划

- 支持在线更新员工数据
- 添加员工详情页面
- 支持收藏常用联系人
- 添加部门领导标识
- 增加更多主题颜色选择
- 支持批量导入/导出联系人

## 注意事项

应用需要获取以下权限，请在首次使用时授予权限：
- 拨打电话权限：用于一键拨号功能
- 读取联系人权限：用于导入联系人功能
- 写入联系人权限：用于导出联系人功能
